{% extends "root/block.html.twig" %} 
{% block mainContent %}
<div class="btn-group">
	<a class="btn dropdown-toggle" data-toggle="dropdown" href="#"> <i
		class=""></i> {{ currentLanguage.label }} <span class="caret"></span>
	</a>

	<ul class="dropdown-menu">
		{% for language in languages %}
		{% if language.locale != currentLanguage.locale %}
		<li><a href="#" onclick="chooseLanguage('{{ language.locale }}');"><i
				class=""></i> {{ language.label }}</a></li> 
				{% endif %}
		{% endfor %}

	</ul>
</div>


<script type="text/javascript">
        function chooseLanguage(locale)
        {
        		jQuery.ajax({
        		   type: "GET", 
        		   url: "/xhr-language/define-language",
        		   async:true,
        		   dataType: "json",
        		   data: { "current-page": jQuery('body').attr('data-current-page'), locale: locale },
        		   success: function(msg){
        		   if(msg.success==false){
        		   jQuery("#error-msg").show();
        		   jQuery("#error-msg").html(msg.message);
        		   }else{
        		   	window.location.reload(); 
        			}
        		   }
        		});
        }
        
    </script>
{% endblock %}



